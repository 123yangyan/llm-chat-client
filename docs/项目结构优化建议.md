# 项目结构优化建议

## 背景
对 api网页 项目进行结构优化分析，从多个维度提供具体的优化建议。

## 主要优化维度

### 1. 顶层目录划分
```
api-web/
├─ backend/   # 后端 FastAPI 代码
├─ frontend/  # 前端代码
├─ tools/     # 通用脚本 & MCP-client
├─ examples/  # 示例脚本与 Notebook
├─ tests/     # 单元/集成测试
├─ docs/      # 项目文档
├─ scripts/   # 运维脚本
└─ .github/   # CI 配置
```

### 2. 后端结构优化
```
backend/
└─ app/
   ├─ api/      # 路由层
   ├─ core/     # 公共配置
   ├─ models/   # 数据模型
   ├─ services/ # 业务逻辑
   ├─ utils/    # 工具函数
   └─ main.py   # FastAPI 入口
```

主要改进：
- 拆分大文件 server.py 为 api 层和服务层
- LLMManager 迁移到 services 目录
- 标准化启动方式

### 3. 依赖与虚拟环境
- 采用 Poetry/PDM 替代 requirements.txt
- 区分开发和生产依赖
- 完善 .gitignore 配置

### 4. 配置与环境变量
- config.yml 迁移到 app/settings.py
- 使用 Pydantic-Settings 管理配置
- 关键配置改为环境变量

### 5. 可执行入口优化
- 提供 Makefile/taskfile.yml
- 规范化启动脚本
- 完善示例文档

### 6. CI/CD 与质量保障
- 添加测试框架
- 配置 pre-commit hooks
- 自动化文档部署

### 7. 其他优化建议
- 清理缓存文件
- 抽象通用工具为独立包
- 规范化前端工程
- 完善项目文档

## 优化后的项目结构
```
api-web/
├─ backend/
│  └─ app/
│     ├─ api/
│     ├─ core/
│     ├─ services/
│     ├─ models/
│     └─ main.py
├─ frontend/
├─ tools/
├─ examples/
├─ tests/
├─ docs/
├─ scripts/
├─ pyproject.toml
└─ README.md
```

## 优化收益
1. 提高代码可维护性和可读性
2. 降低环境切换成本
3. 提升代码质量和开发效率

## 建议实施步骤
1. 调整 .gitignore 并清理缓存文件
2. 重构后端目录结构
3. 引入依赖管理工具
4. 逐步完善其他部分

## 注意事项
- 每个步骤都需要确保功能正常运行
- 建议渐进式迁移，避免大规模重构
- 及时更新文档和测试用例 